# Selfsteal - Caddy/Nginx for Reality

> ๐ **ะัะพะตะบั [gig.ovh](https://gig.ovh)** | ะะฒัะพั: **[DigneZzZ](https://github.com/DigneZzZ)**

ะกะบัะธะฟั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัััะฐะฝะพะฒะบะธ ะธ ัะฟัะฐะฒะปะตะฝะธั ะฒะตะฑ-ัะตัะฒะตัะพะผ (Caddy ะธะปะธ Nginx) ะดะปั ะผะฐัะบะธัะพะฒะบะธ ััะฐัะธะบะฐ Reality ะฒ ัะฒัะทะบะต ั Xray. ะะพัั 443 ะพััะฐะตััั ัะฒะพะฑะพะดะฝัะผ ะดะปั Xray.

<img width="429" height="690" alt="ะธะทะพะฑัะฐะถะตะฝะธะต" src="https://github.com/user-attachments/assets/2ca2348e-5131-4e87-94d8-0a26aeb0d8be" />



## ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

- **ะัะฑะพั ะฒะตะฑ-ัะตัะฒะตัะฐ**: Caddy (ะฟะพ ัะผะพะปัะฐะฝะธั) ะธะปะธ Nginx ั ัะปะฐะณะพะผ `--nginx`
- **Unix Socket (Nginx)**: ะะพ ัะผะพะปัะฐะฝะธั Nginx ะธัะฟะพะปัะทัะตั Unix socket ะดะปั ะปัััะตะน ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- **ACME SSL ัะตััะธัะธะบะฐัั**: Let's Encrypt ัะตัะตะท TLS-ALPN ะฝะฐ ะฟะพััั 8443 (ะฝะต ััะตะฑัะตั 80 ะฟะพัั)
- **ะะฒัะพัััะฐะฝะพะฒะบะฐ Docker**: ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ Docker ะตัะปะธ ะฝะต ัััะฐะฝะพะฒะปะตะฝ
- **ะัะพะฒะตัะบะฐ Firewall**: ะะฒัะพะฟัะพะฒะตัะบะฐ UFW, firewalld, iptables
- **ะะฐัะธัะฐ ะพั ะฟะตัะตะทะฐะฟะธัะธ**: ะัะพะฒะตัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ัะฐะนะปะพะฒ ะธ ัะพะทะดะฐะฝะธะต ะฑัะบะฐะฟะพะฒ
- **ะะฐะปะธะดะฐัะธั DNS**: ะัะพะฒะตัะบะฐ ะฟัะฐะฒะธะปัะฝะพััะธ ะฝะฐัััะพะนะบะธ ะดะพะผะตะฝะฐ
- **11 AI-ัะฐะฑะปะพะฝะพะฒ**: ะัะพัะตััะธะพะฝะฐะปัะฝัะต ัะฐะฑะปะพะฝั ะดะปั ัะตะฐะปะธััะธัะฝะพะน ะผะฐัะบะธัะพะฒะบะธ
- **ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะฒะธัะฐะผะธ**: ะะฐะฟััะบ, ะพััะฐะฝะพะฒะบะฐ, ะฟะตัะตะทะฐะฟััะบ, ะปะพะณะธ, ััะฐััั
- **ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต**: ะัะพะฒะตัะบะฐ ะธ ัััะฐะฝะพะฒะบะฐ ะพะฑะฝะพะฒะปะตะฝะธะน ัะบัะธะฟัะฐ

## ะััะธัะตะบัััะฐ

### Caddy (TCP ะฟะพัั)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         ะะฝัะตัะฝะตั                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ
                           โผ :443
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     Xray (Reality)                          โ
โ                   ะะฐะฝะธะผะฐะตั ะฟะพัั 443                         โ
โ         ะัะธะฝะธะผะฐะตั VLESS ะฟะพะดะบะปััะตะฝะธั ั Reality               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ proxy_protocol
                           โผ 127.0.0.1:9443
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        Caddy                                โ
โ         ะกะปััะฐะตั ะขะะะฌะะ ะฝะฐ 127.0.0.1:9443                    โ
โ      ะัะดะฐัั ัะฐะนั-ะพะฑะผะฐะฝะบั ัะตัะตะท proxy_protocol               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Nginx (Unix Socket - ะฟะพ ัะผะพะปัะฐะฝะธั)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         ะะฝัะตัะฝะตั                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ
                           โผ :443
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     Xray (Reality)                          โ
โ                   ะะฐะฝะธะผะฐะตั ะฟะพัั 443                         โ
โ         ะัะธะฝะธะผะฐะตั VLESS ะฟะพะดะบะปััะตะฝะธั ั Reality               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ proxy_protocol (xver: 1)
                           โผ /dev/shm/nginx.sock
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        Nginx                                โ
โ       ะกะปััะฐะตั ะฝะฐ Unix Socket /dev/shm/nginx.sock            โ
โ      ะัะดะฐัั ัะฐะนั-ะพะฑะผะฐะฝะบั ัะตัะตะท proxy_protocol               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะฐะถะฝะพ**: ะะตะฑ-ัะตัะฒะตั (Caddy/Nginx) **ะะ ัะปััะฐะตั ะฝะฐ ะฟะพััั 443**. ะะพัั 443 ะฟะพะปะฝะพัััั ะฟัะธะฝะฐะดะปะตะถะธั Xray. ะะตะฑ-ัะตัะฒะตั ะฟะพะปััะฐะตั ััะฐัะธะบ ะพั Xray ัะตัะตะท ะฒะฝัััะตะฝะฝะธะน ะฟะพัั ะธะปะธ Unix socket ั proxy_protocol.

## ะขัะตะฑะพะฒะฐะฝะธั

- **ะะฟะตัะฐัะธะพะฝะฝะฐั ัะธััะตะผะฐ**: Linux (Ubuntu, Debian, CentOS ะธ ะดััะณะธะต).
- **ะัะฐะฒะฐ root**: ะกะบัะธะฟั ะดะพะปะถะตะฝ ะฒัะฟะพะปะฝััััั ั sudo.
- **ะะฐะฒะธัะธะผะพััะธ**: Docker ะธ curl (ัััะฐะฝะฐะฒะปะธะฒะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ).
- **ะะธัะบะพะฒะพะต ะฟัะพัััะฐะฝััะฒะพ**: ะะธะฝะธะผัะผ 1 ะะ ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ.
- **ะะพะผะตะฝ**: ะะฐัััะพะตะฝะฝัะน ะดะพะผะตะฝ, ัะบะฐะทัะฒะฐััะธะน ะฝะฐ IP ัะตัะฒะตัะฐ.
- **ะะพััั**:
  - **443** โ ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝ ะดะปั **Xray** (ะฝะต ะทะฐะฝะธะผะฐะตััั ะฒะตะฑ-ัะตัะฒะตัะพะผ!)
  - **Unix socket** `/dev/shm/nginx.sock` โ ะดะปั Nginx (ะฟะพ ัะผะพะปัะฐะฝะธั)
  - **9443** โ ะฒะฝัััะตะฝะฝะธะน TCP ะฟะพัั ะฒะตะฑ-ัะตัะฒะตัะฐ (Caddy ะธะปะธ Nginx ั `--tcp`)
  - **80** โ HTTP โ HTTPS ัะตะดะธัะตะบั (ะธัะฟะพะปัะทัะตััั Caddy ะธ Nginx)
  - **8443** โ ACME TLS-ALPN ะดะปั Nginx (ั ะฐะฒัะพัะพะปะฑัะบะพะผ ะฝะฐ ะดััะณะธะต ะฟะพััั)

## ะฃััะฐะฝะพะฒะบะฐ

### ะััััะฐั ัััะฐะฝะพะฒะบะฐ

**Caddy (ะฟะพ ัะผะพะปัะฐะฝะธั):**
```bash
bash <(curl -Ls https://github.com/DigneZzZ/remnawave-scripts/raw/main/selfsteal.sh) @ install
```

**Nginx ั Unix Socket (ัะตะบะพะผะตะฝะดัะตััั):**
```bash
bash <(curl -Ls https://github.com/DigneZzZ/remnawave-scripts/raw/main/selfsteal.sh) @ --nginx install
```

**Nginx ั TCP ะฟะพััะพะผ:**
```bash
bash <(curl -Ls https://github.com/DigneZzZ/remnawave-scripts/raw/main/selfsteal.sh) @ --nginx --tcp install
```

**Nginx ั ะบะฐััะพะผะฝัะผ ะฟะพััะพะผ ACME:**
```bash
bash <(curl -Ls https://github.com/DigneZzZ/remnawave-scripts/raw/main/selfsteal.sh) @ --nginx --acme-port 15443 install
```

### ะััะฝะฐั ัััะฐะฝะพะฒะบะฐ

```bash
sudo bash -c "curl -fsSL https://raw.githubusercontent.com/DigneZzZ/remnawave-scripts/main/selfsteal.sh -o /usr/local/bin/selfsteal && chmod +x /usr/local/bin/selfsteal"
```

ะะฐัะตะผ:
```bash
selfsteal install              # Caddy (TCP ะฟะพัั)
selfsteal --nginx install      # Nginx (Unix Socket, ัะตะบะพะผะตะฝะดัะตััั)
selfsteal --nginx --tcp install  # Nginx (TCP ะฟะพัั)
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

```bash
selfsteal              # ะะฝัะตัะฐะบัะธะฒะฝะพะต ะผะตะฝั
selfsteal help         # ะกะฟัะฐะฒะบะฐ
```

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `install` | ะฃััะฐะฝะพะฒะธัั ะฒะตะฑ-ัะตัะฒะตั |
| `up` / `down` | ะะฐะฟัััะธัั / ะััะฐะฝะพะฒะธัั ัะตัะฒะธัั |
| `restart` | ะะตัะตะทะฐะฟัััะธัั ัะตัะฒะธัั |
| `status` | ะะพะบะฐะทะฐัั ััะฐััั ะธ ะธะฝัะพัะผะฐัะธั ะพ SSL |
| `logs` | ะัะพัะผะพััะตัั ะปะพะณะธ |
| `template` | ะฃะฟัะฐะฒะปะตะฝะธะต ัะฐะฑะปะพะฝะฐะผะธ ัะฐะนัะฐ |
| `edit` | ะะตะดะฐะบัะธัะพะฒะฐัั ะบะพะฝัะธะณััะฐัะธั |
| `renew-ssl` | ะะฑะฝะพะฒะธัั SSL ัะตััะธัะธะบะฐั (ัะพะปัะบะพ Nginx) |
| `uninstall` | ะฃะดะฐะปะธัั ัััะฐะฝะพะฒะบั |
| `update` | ะะฑะฝะพะฒะธัั ัะบัะธะฟั |

### ะะฟัะธะธ ะฒะตะฑ-ัะตัะฒะตัะฐ

```bash
selfsteal --caddy install       # Caddy (ะฟะพ ัะผะพะปัะฐะฝะธั)
selfsteal --nginx install       # Nginx ั Unix Socket (ะฟะพ ัะผะพะปัะฐะฝะธั)
selfsteal --nginx --tcp install # Nginx ั TCP ะฟะพััะพะผ
```

### ะะฟัะธะธ Nginx

| ะะฟัะธั | ะะฟะธัะฐะฝะธะต |
|-------|----------|
| `--socket` | ะัะฟะพะปัะทะพะฒะฐัั Unix Socket (ะฟะพ ัะผะพะปัะฐะฝะธั) |
| `--tcp` | ะัะฟะพะปัะทะพะฒะฐัั TCP ะฟะพัั ะฒะผะตััะพ socket |
| `--acme-port <port>` | ะะฐััะพะผะฝัะน ะฟะพัั ะดะปั ACME TLS-ALPN |

ะัะธ ัััะฐะฝะพะฒะบะต Nginx ะดะปั ะฟะพะปััะตะฝะธั SSL-ัะตััะธัะธะบะฐัะฐ ะธัะฟะพะปัะทัะตััั ACME TLS-ALPN challenge. ะะพ ัะผะพะปัะฐะฝะธั ัะบัะธะฟั ะฟัะพะฑัะตั ะฟะพััั ะฒ ัะปะตะดัััะตะผ ะฟะพััะดะบะต: **8443 โ 9443 โ 10443 โ 18443 โ 28443**.

ะัะปะธ ะฒัะต ะฟะพััั ะทะฐะฝััั ะธะปะธ ะฝัะถะตะฝ ะบะพะฝะบัะตัะฝัะน ะฟะพัั:
```bash
selfsteal --nginx --acme-port 12345 install
```

> โ๏ธ ะะพัั ACME ะฝัะถะตะฝ ัะพะปัะบะพ ะฒัะตะผะตะฝะฝะพ ะฒะพ ะฒัะตะผั ะฟะพะปััะตะฝะธั/ะพะฑะฝะพะฒะปะตะฝะธั ัะตััะธัะธะบะฐัะฐ.

## ะกัะฐะฒะฝะตะฝะธะต Caddy vs Nginx

| ะคัะฝะบัะธั | Caddy | Nginx |
|---------|-------|-------|
| SSL ัะตััะธัะธะบะฐัั | ะะฒัะพะผะฐัะธัะตัะบะธ (ะฒะฝัััะตะฝะฝะธะต) | ACME (Let's Encrypt) ั ะฐะฒัะพัะพะปะฑัะบะพะผ ะฟะพััะพะฒ |
| ะะพะฝัะธะณััะฐัะธั | Caddyfile | nginx.conf + conf.d/ |
| ะััั ัััะฐะฝะพะฒะบะธ | `/opt/caddy` | `/opt/nginx-selfsteal` |
| **ะะตะถะธะผ ะฟะพะดะบะปััะตะฝะธั** | TCP ะฟะพัั (127.0.0.1:9443) | **Unix Socket** (ะฟะพ ัะผะพะปัะฐะฝะธั) ะธะปะธ TCP |
| **Xray target** | `127.0.0.1:9443` | `/dev/shm/nginx.sock` (socket) ะธะปะธ `127.0.0.1:9443` (tcp) |
| ะะพัั 80 (HTTPโHTTPS) | โ ะะฐ | โ ะะฐ |
| ะะฑะฝะพะฒะปะตะฝะธะต SSL | ะะฒัะพะผะฐัะธัะตัะบะธ | `selfsteal renew-ssl` |
| ะะพัั ะดะปั ACME | 80 (ACME HTTP) | 8443+ (ACME TLS-ALPN) ะธะปะธ `--acme-port` |

### ะัะตะธะผััะตััะฒะฐ Unix Socket (Nginx)
- **ะััััะตะต**: ะะตั ะฝะฐะบะปะฐะดะฝัั ัะฐััะพะดะพะฒ ะฝะฐ TCP ััะตะบ
- **ะะตะทะพะฟะฐัะฝะตะต**: ะะต ะทะฐะฝะธะผะฐะตั ัะตัะตะฒะพะน ะฟะพัั
- **ะัะพัะต**: ะะตั ะบะพะฝัะปะธะบัะพะฒ ะฟะพััะพะฒ

## ะจะฐะฑะปะพะฝั ัะฐะนัะพะฒ

ะะพะผะฐะฝะดะฐ `template` ะฟะพะทะฒะพะปัะตั ะฒัะฑัะฐัั ะพะดะธะฝ ะธะท 11 AI-ะณะตะฝะตัะธัะพะฒะฐะฝะฝัั ัะฐะฑะปะพะฝะพะฒ, ัะพะทะดะฐะฝะฝัั ะฝะตะนัะพัะตััั ัะฟะตัะธะฐะปัะฝะพ ะดะปั ัะตะฐะปะธััะธัะฝะพะน ะผะฐัะบะธัะพะฒะบะธ ััะฐัะธะบะฐ:

### ๐จ ะะพัััะฟะฝัะต ัะฐะฑะปะพะฝั:

1. **๐ 10gag - ะกะฐะนั ะผะตะผะพะฒ**: ะะปะฐััะพัะผะฐ ะดะปั ะฟัะพัะผะพััะฐ ะผะตะผะพะฒ ั ะธะผะธัะฐัะธะตะน ะฒะธะดะตะพะบะพะฝัะตะฝัะฐ
2. **๐ฌ Converter - ะะธะดะตะพัััะดะธั-ะบะพะฝะฒะตััะตั**: ะะฝะปะฐะนะฝ ัะตัะฒะธั ะดะปั ะบะพะฝะฒะตััะฐัะธะธ ะฒะธะดะตะพ ั ะฟะพะดะดะตัะถะบะพะน ะฟะพะฟัะปััะฝัั ะฟะปะฐััะพัะผ
3. **๐ Convertit - ะะพะฝะฒะตััะตั ัะฐะนะปะพะฒ**: ะฃะฝะธะฒะตััะฐะปัะฝัะน ะบะพะฝะฒะตััะตั ั ะฟัะพะฒะตัะบะพะน ัะพัะผะฐัะพะฒ ะธ ัะธะผัะปััะธะตะน ะพะฑัะฐะฑะพัะบะธ
4. **โฌ๏ธ Downloader - ะะฐัะฝะปะพะฐะดะตั**: ะกะตัะฒะธั ะทะฐะณััะทะพะบ ั ัะธััะตะผะพะน ะฟัะธะณะปะฐัะตะฝะธะน ะธ ะฟัะพะฒะตัะบะฐะผะธ
5. **โ๏ธ FileCloud - ะะฑะปะฐัะฝะพะต ััะฐะฝะธะปะธัะต**: ะคะฐะนะปะพััะฐะฝะธะปะธัะต ั ะบัะฐัะธะฒะพะน ัะพัะผะพะน ะฐะฒัะพัะธะทะฐัะธะธ ะธ ัะฐะนะปะพะฒัะผ ะผะตะฝะตะดะถะตัะพะผ
6. **๐ฎ Games-site - ะะตััะพ ะธะณัะพะฒะพะน ะฟะพััะฐะป**: ะกะฐะนั ั ะบะปะฐััะธัะตัะบะธะผะธ ะฑัะฐัะทะตัะฝัะผะธ ะธะณัะฐะผะธ ะธ ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะผะธ ะะ ะพะฑะปะพะถะบะฐะผะธ
7. **๐๏ธ ModManager - ะะพะด-ะผะตะฝะตะดะถะตั ะดะปั ะธะณั**: ะะผะธัะฐัะธั ัะฐะนัะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะผะพะดะธัะธะบะฐัะธัะผะธ ะธะณั
8. **๐ SpeedTest - ะกะฟะธะดัะตัั**: ะขะตััะธัะพะฒะฐะฝะธะต ัะบะพัะพััะธ ะธะฝัะตัะฝะตั-ัะพะตะดะธะฝะตะฝะธั ั ััััะบะพะน ะปะพะบะฐะปะธะทะฐัะธะตะน
9. **๐บ YouTube - ะะธะดะตะพัะพััะธะฝะณ ั ะบะฐะฟัะตะน**: ะะปะฐััะพัะผะฐ ะดะปั ะฒะธะดะตะพ ั ะฑะตัะบะพะฝะตัะฝะพะน ะบะฐะฟัะตะน ะธ ะฟะปะธัะพัะฝัะผ ะธะฝัะตััะตะนัะพะผ
10. **โ๏ธ 503 Error v1 - ะกััะฐะฝะธัะฐ ะพัะธะฑะบะธ 503**: ะกัะธะปัะฝะฐั ัััะฐะฝะธัะฐ ะพัะธะฑะบะธ ั ะพัะพะฑัะฐะถะตะฝะธะตะผ IP-ะฐะดัะตัะฐ ะบะปะธะตะฝัะฐ
11. **โ๏ธ 503 Error v2 - ะกััะฐะฝะธัะฐ ะพัะธะฑะบะธ 503**: ะะปััะตัะฝะฐัะธะฒะฝัะน ะดะธะทะฐะนะฝ ัััะฐะฝะธัั ะพัะธะฑะบะธ

### ๐ค ะัะพะฑะตะฝะฝะพััะธ AI-ัะฐะฑะปะพะฝะพะฒ:

- **ะะพะปะฝะพัััั ัะพะทะดะฐะฝั ะฝะตะนัะพัะตััั**: ะัะต HTML, CSS, JavaScript ะธ ะดะธะทะฐะนะฝ
- **ะะตะฐะปะธััะธัะฝะฐั ะธะผะธัะฐัะธั**: ะจะฐะฑะปะพะฝั ะธะผะธัะธัััั ะฝะฐััะพััะธะต ะฟะพะฟัะปััะฝัะต ัะตัะฒะธัั
- **ะะฒัะพะผะฐัะธัะตัะบะพะต ัะบะฐัะธะฒะฐะฝะธะต**: ะะฐะณััะถะฐัััั ะฝะฐะฟััะผัั ะธะท GitHub ัะตะฟะพะทะธัะพัะธั
- **ะกะปััะฐะนะฝะฐั ัััะฐะฝะพะฒะบะฐ**: ะัะธ ะฟะตัะฒะพะน ัััะฐะฝะพะฒะบะต ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒัะฑะธัะฐะตััั ัะปััะฐะนะฝัะน ัะฐะฑะปะพะฝ
- **ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ**: ะะฐะฑะพัะฐัั ะฝะฐ ะฒัะตั ััััะพะนััะฒะฐั
- **ะะฝัะตัะฐะบัะธะฒะฝัะต ัะปะตะผะตะฝัั**: ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ะบะฝะพะฟะบะธ ะธ ัะพัะผั ะดะปั ัะตะฐะปะธััะธัะฝะพััะธ

### ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะพะฟัะธะธ:

- **View Current Template**: ะัะพัะผะพััะตัั ะธะฝัะพัะผะฐัะธั ะพ ัะตะบััะตะผ ัััะฐะฝะพะฒะปะตะฝะฝะพะผ ัะฐะฑะปะพะฝะต
- **Keep Current Template**: ะกะพััะฐะฝะธัั ัะตะบััะธะน ัะฐะฑะปะพะฝ ะฑะตะท ะธะทะผะตะฝะตะฝะธะน

ะะพัะปะต ะฒัะฑะพัะฐ ัะฐะฑะปะพะฝะฐ ะผะพะถะฝะพ ะฟะตัะตะทะฐะฟัััะธัั Caddy ะดะปั ะฟัะธะผะตะฝะตะฝะธั ะธะทะผะตะฝะตะฝะธะน. ะัะต ัะฐะฑะปะพะฝั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ัะตะทะตัะฒะฝัั ะบะพะฟะธั ะฟัะตะดัะดััะตะณะพ ะบะพะฝัะตะฝัะฐ.

### ๐ฆ ะััะพัะฝะธะบ ัะฐะฑะปะพะฝะพะฒ

ะัะต ัะฐะฑะปะพะฝั ะทะฐะณััะถะฐัััั ะธะท ัะตะฟะพะทะธัะพัะธั [sni-templates](https://github.com/SmallPoppa/sni-templates), ะณะดะต ัะพะดะตัะถะธััั ะฟะพะปะฝะฐั ะบะพะปะปะตะบัะธั AI-ะณะตะฝะตัะธัะพะฒะฐะฝะฝัั ะฒะตะฑ-ัะฐะฑะปะพะฝะพะฒ ั ะฟะพะดัะพะฑะฝัะผะธ ะพะฟะธัะฐะฝะธัะผะธ ะธ ะฟัะตะฒัั ะบะฐะถะดะพะณะพ ัะฐะฑะปะพะฝะฐ.

## ะะพะฝัะธะณััะฐัะธั Xray Reality

ะะพัะปะต ัััะฐะฝะพะฒะบะธ ะฒะตะฑ-ัะตัะฒะตัะฐ ะฝะฐัััะพะนัะต Xray Reality, ะธัะฟะพะปัะทัั ะฟะฐัะฐะผะตััั ะธะท ัััะฐะฝะพะฒะบะธ.

### Nginx ั Unix Socket (ัะตะบะพะผะตะฝะดัะตััั)

```json
{
    "inbounds": [
        {
            "tag": "VLESS_REALITY_NGINX_SOCKET",
            "port": 443,
            "protocol": "vless",
            "settings": {
                "clients": [],
                "decryption": "none"
            },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"]
            },
            "streamSettings": {
                "network": "raw",
                "security": "reality",
                "realitySettings": {
                    "show": false,
                    "xver": 1,
                    "target": "/dev/shm/nginx.sock",
                    "spiderX": "/",
                    "shortIds": [""],
                    "privateKey": "#REPLACE_WITH_YOUR_PRIVATE_KEY",
                    "serverNames": ["reality.example.com"]
                }
            }
        }
    ]
}
```

### Caddy ะธะปะธ Nginx ั TCP ะฟะพััะพะผ

```json
{
    "inbounds": [
        {
            "tag": "VLESS_REALITY_TCP",
            "port": 443,
            "protocol": "vless",
            "settings": {
                "clients": [],
                "decryption": "none"
            },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"]
            },
            "streamSettings": {
                "network": "raw",
                "security": "reality",
                "realitySettings": {
                    "show": false,
                    "xver": 1,
                    "target": "127.0.0.1:9443",
                    "spiderX": "/",
                    "shortIds": [""],
                    "privateKey": "#REPLACE_WITH_YOUR_PRIVATE_KEY",
                    "serverNames": ["reality.example.com"]
                }
            }
        }
    ]
}
```

### ะะฐัะฐะผะตััั ะดะปั ะทะฐะผะตะฝั

| ะะฐัะฐะผะตัั | ะะฟะธัะฐะฝะธะต |
|----------|----------|
| `target` | `/dev/shm/nginx.sock` (Nginx socket) ะธะปะธ `127.0.0.1:9443` (TCP) |
| `xver` | ะัะตะณะดะฐ `1` ะดะปั proxy_protocol v1 |
| `serverNames` | ะะฐั ะดะพะผะตะฝ, ัะบะฐะทะฐะฝะฝัะน ะฟัะธ ัััะฐะฝะพะฒะบะต |
| `privateKey` | ะะฐั ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะน ะฟัะธะฒะฐัะฝัะน ะบะปัั Reality |
| `shortIds` | ะะฐัะธ Reality short IDs |

> โ๏ธ ะัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ัะตะปัััะธะปะฐ ะฝะต ะทะฐะฑัะดััะต ะฟัะธ ัะพะทะดะฐะฝะธะธ ัะพััะฐ ัะบะฐะทะฐัั ะฟัะธะฝัะดะธัะตะปัะฝะพ SNI ะธ Host ัะฐะบะธะผ ะถะต, ะบะฐะบ ั ะฒะฐั ัะบะฐะทะฐะฝะพ ะฒ `serverNames`.

<img width="438" height="435" alt="ะธะทะพะฑัะฐะถะตะฝะธะต" src="https://github.com/user-attachments/assets/57f00a62-1cad-4225-825c-23ed6a779744" />

## โ๏ธ ะะฐะถะฝะพ: ะะฐัััะพะนะบะฐ Unix Socket ะดะปั Docker

ะัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ **Nginx ั Unix Socket** ะธ Xray ะฒ Docker-ะบะพะฝัะตะนะฝะตัะต (ะฝะฐะฟัะธะผะตั, remnanode), ะฝะตะพะฑัะพะดะธะผะพ ะพะฑะตัะฟะตัะธัั ะดะพัััะฟ ะบะพะฝัะตะนะฝะตัะฐ ะบ ัะพะบะตัั.

### ะัะพะฑะปะตะผะฐ
Unix socket ัะพะทะดะฐัััั ะฒ `/dev/shm/nginx.sock`. ะัะปะธ Xray ะทะฐะฟััะตะฝ ะฒ Docker-ะบะพะฝัะตะนะฝะตัะต, ะพะฝ ะธะผะตะตั **ะธะทะพะปะธัะพะฒะฐะฝะฝัะน** `/dev/shm` ะธ ะฝะต ะฒะธะดะธั ัะพะบะตั ะฝะฐ ัะพััะต.

### ะะตัะตะฝะธะต
ะะตะพะฑัะพะดะธะผะพ ะฟัะพะฑัะพัะธัั `/dev/shm` ะฒ ะบะพะฝัะตะนะฝะตั Xray.

#### ะะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ (ัะตะบะพะผะตะฝะดัะตััั)
ะัะธ ัััะฐะฝะพะฒะบะต ัะบัะธะฟั **ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑะฝะฐััะถะธะฒะฐะตั** ะบะพะฝัะตะนะฝะตัั `remnanode`, `xray`, `marzban` ะธ ะฟัะตะดะปะฐะณะฐะตั:
1. **ะะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟัะฐะฒะธัั** โ ะดะพะฑะฐะฒะธัั volume ะฒ docker-compose.yml ะธ ะฟะตัะตะทะฐะฟัััะธัั
2. **ะะพะบะฐะทะฐัั ะธะฝััััะบัะธะธ** โ ะดะปั ัััะฝะพะน ะฝะฐัััะพะนะบะธ
3. **ะัะพะฟัััะธัั** โ ะฝะฐัััะพะธัั ะฟะพะทะถะต

#### ะััะฝะฐั ะฝะฐัััะพะนะบะฐ

ะะพะฑะฐะฒััะต ะฒ `docker-compose.yml` ะฒะฐัะตะณะพ Xray-ะบะพะฝัะตะนะฝะตัะฐ:

```yaml
services:
  remnanode:  # ะธะปะธ xray, marzban ะธ ั.ะด.
    # ... ะพััะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ ...
    volumes:
      - /dev/shm:/dev/shm  # โ ะะพะฑะฐะฒะธัั ััั ัััะพะบั
```

ะะฐัะตะผ ะฟะตัะตะทะฐะฟัััะธัะต ะบะพะฝัะตะนะฝะตั:
```bash
cd /opt/remnanode  # ะธะปะธ ะฟััั ะบ ะฒะฐัะตะผั docker-compose.yml
docker compose down && docker compose up -d
```

#### ะัะพะฒะตัะบะฐ
```bash
# ะัะพะฒะตัะธัั ััะพ ัะพะบะตั ัััะตััะฒัะตั ะฝะฐ ัะพััะต
ls -la /dev/shm/nginx.sock

# ะัะพะฒะตัะธัั ััะพ ะบะพะฝัะตะนะฝะตั ะฒะธะดะธั ัะพะบะตั
docker exec remnanode ls -la /dev/shm/nginx.sock
```

> ๐ก **ะะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน remnanode.sh**: ะกะบัะธะฟั selfsteal ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐะนะดัั ัััะฐะฝะพะฒะบั ะฒ `/opt/remnanode` ะธ ะฟัะตะดะปะพะถะธั ะฒะฝะตััะธ ะธะทะผะตะฝะตะฝะธั.

## ะะฐััะพะผะธะทะฐัะธั

- **AI-ัะฐะฑะปะพะฝั**: ะัะฟะพะปัะทัะนัะต ะบะพะผะฐะฝะดั `template` ะดะปั ะฒัะฑะพัะฐ ะธะท 11 ะฟัะพัะตััะธะพะฝะฐะปัะฝัั AI-ะณะตะฝะตัะธัะพะฒะฐะฝะฝัั ัะฐะฑะปะพะฝะพะฒ
- **HTML-ะบะพะฝัะตะฝั**: ะะตะดะฐะบัะธััะนัะต ัะฐะนะปั ะฒ ะดะธัะตะบัะพัะธะธ ัััะฐะฝะพะฒะบะธ (`/opt/caddy/html` ะธะปะธ `/opt/nginx-selfsteal/html`)
- **ะะพะฝัะธะณััะฐัะธั**: ะัะฟะพะปัะทัะนัะต ะบะพะผะฐะฝะดั `edit` ะดะปั ะธะทะผะตะฝะตะฝะธั ะฝะฐัััะพะตะบ
- **ะะพะณะธ**: ะะพัััะฟะฝั ัะตัะตะท ะบะพะผะฐะฝะดั `logs`
- **ะะฒัะพะผะฐัะธัะตัะบะธะต ะฑัะบะฐะฟั**: ะัะธ ัะผะตะฝะต ัะฐะฑะปะพะฝะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตััั ัะตะทะตัะฒะฝะฐั ะบะพะฟะธั ะฟัะตะดัะดััะตะณะพ ะบะพะฝัะตะฝัะฐ

## ะฃะฟัะฐะฒะปะตะฝะธะต ะปะพะณะฐะผะธ
ะกะบัะธะฟั ะฒะบะปััะฐะตั ะฟัะพะดะฒะธะฝัััั ัะธััะตะผั ัะฟัะฐะฒะปะตะฝะธั ะปะพะณะฐะผะธ:

- **ะัะพัะผะพัั ัะฐะทะผะตัะฐ ะปะพะณะพะฒ** - ะฟะพะบะฐะทัะฒะฐะตั ัะตะบััะธะน ัะฐะทะผะตั ัะฐะนะปะพะฒ ะปะพะณะพะฒ
- **ะะณัะฐะฝะธัะตะฝะธะต ะปะพะณะพะฒ** - ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะผะฐะบัะธะผะฐะปัะฝัะน ัะฐะทะผะตั (ะฟะพ ัะผะพะปัะฐะฝะธั 50MB)
- **ะัะธััะบะฐ ะปะพะณะพะฒ** - ะฑะตะทะพะฟะฐัะฝะพะต ัะดะฐะปะตะฝะธะต ััะฐััั ะทะฐะฟะธัะตะน
- **ะะพัะฐัะธั ะปะพะณะพะฒ** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะฐััะธะฒะธัะพะฒะฐะฝะธะต ะฟัะธ ะดะพััะธะถะตะฝะธะธ ะปะธะผะธัะฐ

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะัะฝะพะฒะฝัะต ัะฐะนะปั
ะะพัะปะต ัััะฐะฝะพะฒะบะธ ัะพะทะดะฐะตััั ัะปะตะดัััะฐั ััััะบัััะฐ:

```
./
โโโ docker-compose.yml    # Docker Compose ะบะพะฝัะธะณััะฐัะธั
โโโ Caddyfile            # ะะพะฝัะธะณััะฐัะธั Caddy
โโโ .env                 # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
โโโ html/                # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั ัะฐะนัะฐ
    โโโ index.html
    โโโ css/
    โโโ js/
    โโโ assets/
```

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (.env)
```bash
DOMAIN=your-domain.com          # ะะฐั ะดะพะผะตะฝ
REALITY_DEST=8080              # ะะพัั Reality ะฝะฐะทะฝะฐัะตะฝะธั
REALITY_SERVER_NAMES=          # ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตัะฒะตัะฝัะต ะธะผะตะฝะฐ
```

## ๐ ะะฑะฝะพะฒะปะตะฝะธั

### ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต
ะกะบัะธะฟั ะฟะพะดะดะตัะถะธะฒะฐะตั ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ะดะพ ะฟะพัะปะตะดะฝะตะน ะฒะตััะธะธ:
1. ะะฐะฟัััะธัะต ัะบัะธะฟั
2. ะัะฑะตัะธัะต ะฟัะฝะบั "9) ะะฑะฝะพะฒะธัั ัะบัะธะฟั"
3. ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะบะฐัะฐะตั ะธ ัััะฐะฝะพะฒะธั ะฟะพัะปะตะดะฝัั ะฒะตััะธั


### ะะฑัะธะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั

#### ะัะพะฑะปะตะผะฐ: ะะพะฝัะตะนะฝะตั ะฝะต ะทะฐะฟััะบะฐะตััั
**ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ะปะพะณะธ ะธ ัะฑะตะดะธัะตัั, ััะพ ะฟะพััั ะฝะต ะทะฐะฝััั
```bash
docker logs caddy_reality_container
netstat -tlnp | grep :80
netstat -tlnp | grep :443
```

#### ะัะพะฑะปะตะผะฐ: SSL ัะตััะธัะธะบะฐั ะฝะต ะฟะพะปััะฐะตััั
**ะะตัะตะฝะธะต**: ะฃะฑะตะดะธัะตัั, ััะพ ะดะพะผะตะฝ ะบะพััะตะบัะฝะพ ะฝะฐัััะพะตะฝ ะธ ะดะพัััะฟะตะฝ
```bash
# ะัะพะฒะตัะบะฐ DNS
nslookup your-domain.com
dig your-domain.com A

# ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ ะฟะพััะฐ
telnet your-domain.com 80
telnet your-domain.com 443
```

#### ะัะพะฑะปะตะผะฐ: ะกะฐะนั ะฝะต ะพัะพะฑัะฐะถะฐะตััั
**ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ัะฐะนะปั ัะฐะฑะปะพะฝะฐ ะธ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ
```bash
ls -la html/
docker exec caddy_reality_container ls -la /var/www/html/
```

## ๐ ะฃะดะฐะปะตะฝะธะต

ะะปั ะฟะพะปะฝะพะณะพ ัะดะฐะปะตะฝะธั ัััะฐะฝะพะฒะบะธ:
```bash
selfsteal uninstall
```

ะัะธ ะฟะตัะตัััะฐะฝะพะฒะบะต ัะบัะธะฟั ะฟัะพะฒะตััะตั ะฝะฐะปะธัะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ัะฐะนะปะพะฒ ะธ ะฟัะตะดะปะฐะณะฐะตั ัะพะทะดะฐัั ะฑัะบะฐะฟ.

> โ๏ธ ะะพะถะฝะพ ัััะฐะฝะพะฒะธัั ัะพะปัะบะพ **ะพะดะธะฝ** ะฒะตะฑ-ัะตัะฒะตั (Caddy ะธะปะธ Nginx). ะะปั ัะผะตะฝั ัะตัะฒะตัะฐ ัะฝะฐัะฐะปะฐ ัะดะฐะปะธัะต ัะตะบััะธะน.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฑะตะทะพะฟะฐัะฝะพััะธ
- ะัะฟะพะปัะทัะนัะต ัะพะปัะบะพ ะดะพะฒะตัะตะฝะฝัะต ะดะพะผะตะฝั
- ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ัะบัะธะฟั ะธ Docker ะพะฑัะฐะทั
- ะะพะฝะธัะพัััะต ะปะพะณะธ ะฝะฐ ะฟัะตะดะผะตั ะฟะพะดะพะทัะธัะตะปัะฝะพะน ะฐะบัะธะฒะฝะพััะธ
- ะะณัะฐะฝะธัััะต ะดะพัััะฟ ะบ ัะตัะฒะตัั ัะฐะนัะฒะพะปะพะผ

### ะคะฐะนะปั ั ััะฒััะฒะธัะตะปัะฝัะผะธ ะดะฐะฝะฝัะผะธ
- `.env` - ัะพะดะตัะถะธั ะบะพะฝัะธะณััะฐัะธั ะดะพะผะตะฝะฐ
- `Caddyfile` - ัะพะดะตัะถะธั ะฝะฐัััะพะนะบะธ TLS
- ะะพะณะธ - ะผะพะณัั ัะพะดะตัะถะฐัั IP ะฐะดัะตัะฐ ะธ ะทะฐะฟัะพัั

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- [ะะพะบัะผะตะฝัะฐัะธั Caddy](https://caddyserver.com/docs/)
- [Docker Compose ะดะพะบัะผะตะฝัะฐัะธั](https://docs.docker.com/compose/)
- [Reality Protocol](https://github.com/XTLS/Reality)
- [SNI Templates - AI-ะณะตะฝะตัะธัะพะฒะฐะฝะฝัะต ัะฐะฑะปะพะฝั](https://github.com/DigneZzZ/remnawave-scripts/tree/main/sni-templates)

## ะะธัะตะฝะทะธั

MIT License. ะะพะดัะพะฑะฝะพััะธ ะฒ ัะฐะนะปะต [LICENSE](LICENSE).

## ะะพะฝัะฐะบัั

- **ะัะพะตะบั**: [gig.ovh](https://gig.ovh)
- **ะะฒัะพั**: [DigneZzZ](https://github.com/DigneZzZ)
- **ะะตะฟะพะทะธัะพัะธะน**: [github.com/DigneZzZ/remnawave-scripts](https://github.com/DigneZzZ/remnawave-scripts)
- **Issues**: ะัะบััะฒะฐะนัะต issue ะฝะฐ GitHub ะดะปั ะฒะพะฟัะพัะพะฒ ะธ ะฟัะตะดะปะพะถะตะฝะธะน.


## ๐ค ะะพะดะดะตัะถะบะฐ

ะัะปะธ ั ะฒะฐั ะฒะพะทะฝะธะบะปะธ ะฒะพะฟัะพัั ะธะปะธ ะฟัะพะฑะปะตะผั:
1. ะัะพะฒะตัััะต ัะฐะทะดะตะป "ะะธะฐะณะฝะพััะธะบะฐ" ะฒััะต
2. ะะพัะผะพััะธัะต ะปะพะณะธ ะบะพะฝัะตะนะฝะตัะฐ: `docker logs caddy_reality_container`
3. ะกะพะทะดะฐะนัะต Issue ะฒ [GitHub ัะตะฟะพะทะธัะพัะธะธ](https://github.com/DigneZzZ/remnawave-scripts/issues)
